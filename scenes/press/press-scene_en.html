<!--
Copyright 2015 Google Inc. All rights reserved.

Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at

      http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed
under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the License for the
specific language governing permissions and limitations under the License.
-->
<link rel="import" href="../scene-behavior.html">
<link rel="import" href="press-scene_module.html">

<link rel="import" href="../../elements/infopages/info-card.html">
<link rel="import" href="../../elements/infopages/info-chooser.html">

<link rel="import" href="models.html">

<dom-module id="press-scene">
<template>
  <style include="press-scene_module"></style>
  <div id="press-content">

    <div id="press-hero">
      <div class="press-header">
        <div class="press-title">
          <h1><i18n-msg msgid="press">PLACEHOLDER_i18n</i18n-msg></h1>
        </div>
        <h3><i18n-msg msgid="press-about-tracker">PLACEHOLDER_i18n</i18n-msg></h3>
      </div>
      <div class="press-description">
        <div class="press-description-left">
          <div class="square"></div>
        </div>
        <div class="press-description-right">
          <p><i18n-msg msgid="press-about-village1">PLACEHOLDER_i18n</i18n-msg></p>
          <p><i18n-msg msgid="press-about-village2">PLACEHOLDER_i18n</i18n-msg></p>
        </div>
      </div>
    </div>

    <div id="press-intro">
      <div class="press-intro-col press-intro-left">
        <div class="press-intro-inner">
          <div class="rect"></div>
          <h2><i18n-msg msgid="press-edu">PLACEHOLDER_i18n</i18n-msg></h2>
          <p><i18n-msg msgid="press-edu1">PLACEHOLDER_i18n</i18n-msg></p>
        </div>
      </div>
      <div class="press-intro-col press-intro-right">
        <div class="press-intro-inner">
          <div class="rect"></div>
          <h2><i18n-msg msgid="press-whatsnew">PLACEHOLDER_i18n</i18n-msg></h2>
          <ul>
            <li><strong><i18n-msg msgid="press-whatsnew1-title">PLACEHOLDER_i18n</i18n-msg></strong> <i18n-msg msgid="press-whatsnew1-text">PLACEHOLDER_i18n</i18n-msg></li>
            <li><strong><i18n-msg msgid="press-whatsnew2-title">PLACEHOLDER_i18n</i18n-msg></strong> <i18n-msg msgid="press-whatsnew2-text">PLACEHOLDER_i18n</i18n-msg></li>
            <li><strong><i18n-msg msgid="press-whatsnew3-title">PLACEHOLDER_i18n</i18n-msg></strong> <i18n-msg msgid="press-whatsnew3-text">PLACEHOLDER_i18n</i18n-msg></li>
            <li><strong><i18n-msg msgid="press-whatsnew4-title">PLACEHOLDER_i18n</i18n-msg></strong> <i18n-msg msgid="press-whatsnew4-text">PLACEHOLDER_i18n</i18n-msg></li>
          </ul>
        </div>
      </div>
    </div>

    <div id="press-primary">
      <div class="press-primary-inner">
        <h2><i18n-msg msgid="press-villagetracker-title">PLACEHOLDER_i18n</i18n-msg></h2>

        <info-card image="[[importPath]]img/tmb-santas-village.png">
          <h4><i18n-msg msgid="santasvillage">PLACEHOLDER_i18n</i18n-msg></h4>
          <h5><i18n-msg msgid="press-villagetracker-opendec">PLACEHOLDER_i18n</i18n-msg></h5>
          <p>While millions of people eagerly await Dec 24th, Santa and his elves are keeping busy at the North Pole. This year, they've realized it's time to study up on geography and coding to ensure Santa's sleigh goes on the most efficient path around the world using the most advanced algorithms. It's his biggest night of the year! </p>
          <div class="card-links">
            <span class="card-title"><i18n-msg msgid="press-asset-resources">PLACEHOLDER_i18n</i18n-msg></span>
            <a href="https://storage.googleapis.com/mapsdevsite/santa-2015/santa-tracker-village-with-santa.png" target="_blank"><i18n-msg msgid="press-asset-screenshot">PLACEHOLDER_i18n</i18n-msg> <span>(PNG)</span></a>
          </div>
        </info-card>

        <info-card image="[[importPath]]img/tmb-santa-tracker.png">
          <h4><i18n-msg msgid="santatracker">PLACEHOLDER_i18n</i18n-msg></h4>
          <h5><i18n-msg msgid="press-villagetracker-open24th">PLACEHOLDER_i18n</i18n-msg></h5>
          <p>On his sleigh, arguably the fastest airborne vehicle in the world, Santa whips from city to city. Follow him each step of the way on <a href="https://google.com/santatracker">google.com/santatracker</a>. Get the latest updates on his location, play exclusive games only available on the 24th, or dive into Street View of all the cities he'll visit that night.</p>
          <div class="card-links">
            <span class="card-title"><i18n-msg msgid="press-asset-resources">PLACEHOLDER_i18n</i18n-msg></span>
            <a href="https://storage.googleapis.com/mapsdevsite/santa-2015/santa-tracker-tracker-map.png" target="_blank"><i18n-msg msgid="press-asset-screenshot">PLACEHOLDER_i18n</i18n-msg> <span>(PNG)</span></a>
            <a href="https://storage.googleapis.com/mapsdevsite/santa-2015/DEC24-tracker-full.gif" target="_blank"><i18n-msg msgid="press-asset-animation">PLACEHOLDER_i18n</i18n-msg> <span>(GIF)</span></a>
          </div>
        </info-card>

      </div>
    </div>

    <div id="press-secondary">
      <div class="press-secondary-inner">
        <h2><i18n-msg msgid="press-games-title">PLACEHOLDER_i18n</i18n-msg></h2>

        <info-chooser choices="education watch android new" value="education">
          <template is="dom-repeat" items="[[cards]]" as="card">

            <info-card filter$="[[card.filter]]"
                image="[[_computeInfoCardImage(card.key)]]"
                href="[[urlFor(card.key)]]">
              <h4>[[card.title]]</h4>
              <h5>[[card.type]]</h5>
              <p>[[card.description]]</p>
              <div hidden$="[[!card.resources.length]]" class="card-links">
                <span class="card-title"><i18n-msg msgid="press-asset-resources">PLACEHOLDER_i18n</i18n-msg></span>
                <template is="dom-repeat" items="[[card.resources]]">
                  <a href="[[item]]" target="_blank">
                    [[_computeStringForType(item)]] <span>([[_computeTypeOfURL(item)]])</span>
                  </a>
                </template>
              </div>
            </info-card>

          </template>

        </info-chooser>
      </div>
    </div>

    <div id="press-device">
      <h2><i18n-msg msgid="press-device-title">PLACEHOLDER_i18n</i18n-msg></h2>
      <p class="press-device-intro"><i18n-msg msgid="press-device-text">PLACEHOLDER_i18n</i18n-msg></p>

      <div class="press-device-grid">
        <!-- <div class="press-device-square">
          <div class="square" style$="background-image: url([[importPath]]img/illust-chromecast_2x.png)"></div>
          <h4>Chromecast</h4>
          <p>Broadcast the adventure to your TV using Chromecast.</p>
          <a href="https://chromecast.com">Learn More</a>
        </div> -->
        <div class="press-device-square">
          <div class="square" style$="background-image: url([[importPath]]img/illust-web-googlehome_2x.png)"></div>
          <h4>New Assistant</h4>
          <p>As we get closer to the big day, ask your Pixel device or Google Home “Where is Santa”. The answer may surprise you.</p>
          <a href="https://assistant.google.com">Learn More</a>
        </div>
        <div class="press-device-square">
          <div class="square" style$="background-image: url([[importPath]]img/illust-mobile-app_2x.png)"></div>
          <h4>Android App</h4>
          <p>Download the Santa Tracker App for Android on the Play Store.</p>
          <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.santatracker">Learn More</a>
        </div>
        <div class="press-device-square">
          <div class="square" style$="background-image: url([[importPath]]img/illust-wear_2x.png)"></div>
          <h4>Android Wear</h4>
          <p>Track Santa from your wrist with Android Wear integration.</p>
          <a href="https://www.android.com/wear/">Learn More</a>
        </div>
        <div class="press-device-square">
          <div class="square" style$="background-image: url([[importPath]]img/illust-web-optimized_2x.png)"></div>
          <h4>Mobile Optimized</h4>
          <p><a href="https://google.com/santatracker">google.com/santatracker</a> works on laptops, phones, and tablets so you can track Santa on the ho-ho-go.</p>
        </div>
        <div class="press-device-square">
          <div class="square" style$="background-image: url([[importPath]]img/illust-google-search_2x.png)"></div>
          <h4>Google Search</h4>
          <p>Search for "Santa" on <a href="https://google.com">google.com</a> to see a countdown to Santa's round-the-world journey and a holiday-themed results page.</p>
        </div>
      </div>

    </div>

    <div id="press-footer">
      <h3><i18n-msg msgid="press-need-title">PLACEHOLDER_i18n</i18n-msg></h3>
      <p><i18n-msg msgid="press-need-text">PLACEHOLDER_i18n</i18n-msg></p>
      <a href="mailto:press@google.com">press@google.com</a>
    </div>

    <div hidden>
      <div id="msg_PNG"><i18n-msg msgid="press-asset-screenshot">PLACEHOLDER_i18n</i18n-msg></div>
      <div id="msg_GIF"><i18n-msg msgid="press-asset-animation">PLACEHOLDER_i18n</i18n-msg></div>
    </div>

  </div>
</template>
<script>
  Polymer({
    is: 'press-scene',
    behaviors: [window.SantaSceneBehavior],

    properties: {
      scene: Object,
      cards: Array,
    },

    _computeTypeOfURL: function(path) {
      const index = path.lastIndexOf('.');
      if (index !== -1) {
        return path.substr(index + 1).toUpperCase();
      }
      return '?';
    },

    _computeStringForType: function(path) {
      const type = this._computeTypeOfURL(path);
      const el = this.$['msg_' + type];
      return el && el.textContent || 'Download';
    },

    onPreload: function() {
      var images = [
        'img/tmb-santa-tracker.png',
        'img/tmb-santas-village.png',
        'img/bg-press-page-hero.png',
        'img/illust-chromecast_2x.png',
        'img/illust-educational_2x.png',
        'img/illust-embed_2x.png',
        'img/illust-mobile-app_2x.png',
        'img/illust-new_2x.png',
        'img/illust-reporter_2x.png',
        'img/illust-wear_2x.png',
        'img/illust-web-optimized_2x.png',
        'img/illust-web-googlehome_2x.png',
        'img/title-bg-swirl_2x.png',
        'img/illust-google-maps_2x.png',
        'img/illust-web-cardboard_2x.png',
      ];
      this.preloadImages(images);
    },

    onShow: function() {
      this.scene = new scenes.press.Scene();
      this.cards = this.scene.getModels(function(key) {
        if (key[0] === '_') {
          return false;  // android
        }
        var locked = santaApp.sceneIsOpen(key, true) === false;
        if (window.DEV && Math.random() > 0.5) {
          locked = true;
        }
        return locked;
      });
    },

    _computeInfoCardImage: function(sceneName) {
      if (!sceneName) {
        return null;
      } else if (sceneName[0] === '_') {
        return this.resolveUrl('img/app_' + sceneName.slice(1) + '.png');
      }
      return this.resolveUrl('../../images/scenes/' + sceneName + '_2x.png');
    },

  });
</script>
</dom-module>
