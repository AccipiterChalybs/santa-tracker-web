<!--
Copyright 2016 Google Inc. All rights reserved.

Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at

      http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software distributed
under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
CONDITIONS OF ANY KIND, either express or implied. See the License for the
specific language governing permissions and limitations under the License.
-->
<link rel="import" href="../scene-behavior.html">
<link rel="import" href="educators-scene_module.html">

<link rel="import" href="../../elements/infopages/info-card.html">
<link rel="import" href="../../elements/infopages/info-chooser.html">

<link rel="import" href="../press/models.html">

<dom-module id="educators-scene">
<template>
  <style include="educators-scene_module"></style>
  <div id="content">

    <div id="hero">
      <div class="header">
        <div class="title">
          <h1><i18n-msg msgid="educators">PLACEHOLDER_i18n</i18n-msg></h1>
        </div>
        <h3><i18n-msg msgid="educators-learn">PLACEHOLDER_i18n</i18n-msg></h3>
      </div>
      <div class="description">
        <div class="left">
          <div class="square"></div>
        </div>
        <div class="right">
          <p>We know Santa's elves aren't the only ones busy this December. For teachers making lessons plans and checking them twice, we've got you covered with PDFs and video tutorials. Our free educational games are great for K-12 classroom warm-ups, extension activities, and writing prompts.</p>
        </div>
      </div>
    </div>

    <div id="educators-secondary">
      <div class="educators-secondary-inner">
        <h2>Games for the classroom</h2>

        <info-chooser choices="geography computerscience language socialstudies">
          <template is="dom-repeat" items="[[cards]]" as="card">
            <info-card filter$="[[card.filter]]"
                image="[[_computeInfoCardImage(card.key)]]"
                type="[[card.type]]"
                href="[[urlFor(card.key)]]">
              <div slot="title">[[card.title]]</div>
              <p>[[card.description]]</p>
            </info-card>
          </template>
        </info-chooser>
      </div>
    </div>

    <div id="educators-primary" on-click="_trackLessonPlan">
      <h2>Lesson plans</h2>
      <p class="educators-primary-intro">Light the way for your students with activity ideas, teaching tips, and discussion questions for some of our favorite Santa Tracker games. And for help, be sure to watch our video tutorials.</p>

      <info-chooser id="lang"
          hide-all
          choices="[[_lessonPlanLanguageChoices]]"
          value="{{_lessonPlanLanguage}}">
      </info-chooser>

      <div class="educators-primary-inner">
        <info-card image="[[importPath]]img/lesson-plan-traditions.png">
          <div slot="title">Christmas traditions around the world</div>
          <p>
            Students will be able to compare, contrast, and reflect upon Christmas traditions in different countries.
          </p>
          <div class="card-links">
            <span class="card-title">Aligned with Common Core standards</span>
            <a data-id="traditions_k-2" href="https://storage.googleapis.com/santa/lessonplans/[[_lessonLang]]/ST-Lesson Plan-Grades K-2.pdf" target="_blank">Grades K-2 <span>(PDF file, [[_lessonLangText]])</span></a>
            <a data-id="traditions_3-5" href="https://storage.googleapis.com/santa/lessonplans/[[_lessonLang]]/ST-Lesson Plan-Grades 3-5.pdf" target="_blank">Grades 3-5 <span>(PDF file, [[_lessonLangText]])</span></a>
            <a data-id="traditions_6-8" href="https://storage.googleapis.com/santa/lessonplans/[[_lessonLang]]/ST-Lesson Plan-Grades 6-8.pdf" target="_blank">Grades 6-8 <span>(PDF file, [[_lessonLangText]])</span></a>
            <a data-id="traditions_9-10" href="https://storage.googleapis.com/santa/lessonplans/[[_lessonLang]]/ST-Lesson Plan-Grades 9-10.pdf" target="_blank">Grades 9-10 <span>(PDF file, [[_lessonLangText]])</span></a>
          </div>
        </info-card>

        <info-card image="[[importPath]]img/lesson-plan-code.png">
          <div slot="title">Practice coding with Santa's elves</div>
          <p>
            Students will learn how to move elves and make snowflakes with code, experimenting with sequences and loops.
          </p>
          <div class="card-links">
            <span class="card-title">Aligned with ISTE standards</span>
            <a class="card-play" data-id="coding_youtube_k-2" href="https://youtu.be/t_tuZl-CfFs" target="_blank">
              Grades K-2: Code Lab <span>(video tutorial)</span>
            </a>
            <a data-id="coding_k-2" href="https://storage.googleapis.com/santa/lessonplans/[[_lessonLang]]/ST-Lesson Plan-Code Lab-Grades K-2.pdf" target="_blank">Grades K-2: Code Lab <span>(PDF file, [[_lessonLangText]])</span></a>
            <a class="card-play" data-id="coding_youtube_3-5" href="https://youtu.be/BotTyMAw4ho" target="_blank">
              Grades 3-5: Code Boogie <span>(video tutorial)</span>
            </a>
            <a data-id="coding_3-5" href="https://storage.googleapis.com/santa/lessonplans/[[_lessonLang]]/ST-Lesson Plan-Code Boogie-Grades 3-5.pdf" target="_blank">Grades 3-5: Code Boogie <span>(PDF file, [[_lessonLangText]])</span></a>
            <a class="card-play" data-id="coding_youtube_6-8" href="https://youtu.be/zUEQzwd4MnE" target="_blank">
              Grades 3-5: Code a Snowflake <span>(video tutorial)</span>
            </a>
            <a data-id="coding_6-8" href="https://storage.googleapis.com/santa/lessonplans/[[_lessonLang]]/ST-Lesson Plan-Code Snowflake-Grades 6-8.pdf" target="_blank">Grades 6-8: Code a Snowflake <span>(PDF file, [[_lessonLangText]])</span></a>
          </div>
        </info-card>
      </div>
    </div>

    <div id="educators-secondary">
      <div class="educators-secondary-inner">

        <div class="educators-card-container center">
          <info-card image="[[importPath]]img/coding.png">
            <div slot="title">Coding resources</div>
            <p>Learn more about Computer Science through these free, online coding resources.</p>
            <div class="card-links">
              <span class="card-title">Links</span>
              <a href="https://www.cs-first.com/content/2016-hour-code-teachers" class="card-link" target="_blank">Google's Official Hour of Code Activity</a>
              <a href="https://www.cs-first.com/en/home" class="card-link" target="_blank">CS First</a>
              <a href="https://madewithcode.com" class="card-link" target="_blank">Made with Code</a>
              <a href="https://scratch.mit.edu/go" class="card-link" target="_blank">Scratch</a>
            </div>
          </info-card>
        </div>
      </div>
    </div>

    <div id="educators-nonprofit">
      <h2>Educational Non-Profit Organizations</h2>
      <p class="educators-nonprofit-intro">We've partnered with <a href="https://google.org">Google.org</a> to showcase educational non-profits that celebrate the season of giving all year long.</p>

      <div class="grid">
        <div class="tile">
          <div class="image" style$="background-image: url([[importPath]]img/logo-code.png)"></div>
          <h4>Code.org</h4>
          <p>Code.org® is a non-profit dedicated to expanding access to computer science, and increasing participation by women and underrepresented students of color. Code.org®'s vision is that every student in every school should have the opportunity to learn computer science.</p>
          <a href="https://code.org">Learn More</a>
        </div>
        <div class="tile">
          <div class="image" style$="background-image: url([[importPath]]img/logo-donors-choose.png)"></div>
          <h4>DonorsChoose.org</h4>
          <p>Founded in 2000 by a Bronx history teacher, DonorsChoose.org has raised over half-a-billion dollars for America's classrooms. Teachers at three-quarters of the public schools in the U.S. have come to DonorsChoose.org to request what their students need to learn.</p>
          <a href="https://donorschoose.org">Learn More</a>
        </div>
        <div class="tile">
          <div class="image" style$="background-image: url([[importPath]]img/logo-storyweaver.png)"></div>
          <h4>Pratham Books</h4>
          <p>Close to 40% of the global population does not have access to education in a language they speak or understand. StoryWeaver hopes to change that by helping educators, writers and translators create joyful supplementary reading resources for children in over 100 languages of the world.</p>
          <a href="https://storyweaver.org.in/prathambooks">Learn More</a>
        </div>
        <div class="tile">
          <div class="image" style$="background-image: url([[importPath]]img/logo-khan.png)"></div>
          <h4>Khan Academy</h4>
          <p>Khan Academy is a nonprofit with a mission to provide a free, world-class education for anyone, anywhere. Khan Academy believes learners of all ages should have unlimited access to free educational content they can master at their own pace.</p>
          <a href="https://khanacademy.org">Learn More</a>
        </div>
        <div class="tile">
          <div class="image" style$="background-image: url([[importPath]]img/logo-lwb.png)"></div>
          <h4>Libraries Without Borders</h4>
          <p>Libraries Without Borders (LWB) is a leading international NGO in culture-based development. With innovative projects around libraries, LWB allows more than 2 million people to develop creative energies and build new livelihood skills.</p>
          <a href="https://librarieswithoutborders.org">Learn More</a>
        </div>
        <div class="tile">
          <div class="image" style$="background-image: url([[importPath]]img/logo-scratch.png)"></div>
          <h4>Scratch Foundation</h4>
          <p>Scratch is the world's largest free coding platform for kids. Millions of kids create and share interactive projects in the Scratch Online Community. It was developed by the MIT Media Lab to engage young people in thinking creatively, reasoning systematically, and working collaboratively.</p>
          <a href="https://scratch.mit.edu/tips">Learn More</a>
        </div>
      </div>

    </div>

    <div id="educators-footer">
      <h3>Need something?</h3>
      <p>Elves and Googlers are here to help.</p>
      <a href="https://google.com/edu" target="_blank">Google for Education</a>
    </div>

  </div>
</template>
<script>
(function() {

  /**
   * @type {!Object<string, string>} language mappings for lesson plans
   */
  const lessonPlans = {
    'en': 'English',
    'es': 'Español',
    'fr': 'Français',
    'ja': '日本語',
    'ko': '한국어',
  };

  /**
   * @type {!Array<string} languages supported for lesson plans
   */
  const lessonPlanLanguages = Object.freeze(['en', 'es', 'fr', 'ja', 'ko']);

  Polymer({
    is: 'educators-scene',
    behaviors: [window.SantaSceneBehavior],

    properties: {

      scene: {
        type: Object,
      },

      cards: {
        type: Array,
      },

      /**
       * The possible lesson plan language choices, including "lang_". Used for template binding.
       */
      _lessonPlanLanguageChoices: {
        type: Array,
        value: () => lessonPlanLanguages.map((lang) => `lang_${lang}`).join(' '),
      },

      /**
       * The lesson plan language, including the "lang_" prefix, e.g., "lang_en".
       */
      _lessonPlanLanguage: {
        type: String,
        value: () => {
          const left = (document.documentElement.lang || 'en').substr(0, 2);
          if (lessonPlanLanguages.indexOf(left) !== -1) {
            return 'lang_' + left;
          }
          return 'lang_' + lessonPlanLanguages[0];
        },
      },

      _lessonLangText: {
        type: String,
        computed: '_computeLessonLangText(_lessonLang)',
      },

      /**
       * The two-letter language code currently visible for lesson plans, e.g. "en".
       */
      _lessonLang: {
        type: String,
        computed: '_computeLessonLang(_lessonPlanLanguage)',
      },

    },

    onPreload: function() {
      this.preloadImages([
        'img/bg-hero.png',
        'img/illust-teacher_2x.png',
        'img/lesson-plan-bg-full.png',
        'img/lesson-plan-code.png',
        'img/lesson-plan-traditions.png',
        'img/logo-scratch.png',
        'img/logo-code.png',
        'img/logo-donors-choose.png',
        'img/logo-khan.png',
        'img/logo-lwb.png',
        'img/logo-storyweaver.png',
      ]);
    },

    onShow: function() {
      const spaceRe = /\s+/;

      this.scene = new scenes.press.Scene();
      this.cards = this.scene.getModels((key) => {
        let locked = santaApp.sceneIsOpen(key) === false;
        if (window.DEV && Math.random() > 0.5) {
          locked = true;
        }
        return locked;
      }).filter((card) => {
        // pre-filter to education cards only
        return card.filter.split(spaceRe).indexOf('education') !== -1;
      });
    },

    _computeInfoCardImage: function(sceneName) {
      if (!sceneName) {
        return null;
      }
      return this.resolveUrl('../../images/scenes/' + sceneName + '_2x.png');
    },

    _computeLessonLang: function(lessonPlanLanguage) {
      if (lessonPlanLanguage.substr(0, 5) === 'lang_') {
        return lessonPlanLanguage.substr(5);
      }
      return 'en';
    },

    _computeLessonLangText: function(lessonLang) {
      return lessonPlans[lessonLang] || '?';
    },

    _trackLessonPlan: function(e, detail) {
      const link = e.target.closest('a[href]');
      if (!link) {
        return;
      }
      const label = this._lessonLang + '/' + link.getAttribute('data-id');
      window.ga('send', 'event', 'lessonPlanDownload', 'click', label);
    },

  });

}());
</script>
</dom-module>
