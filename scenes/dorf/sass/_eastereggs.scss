#eastereggs {
  $idx-id: 1;
  $idx-width: 2;
  $idx-height: 3;
  $idx-left: 4;
  $idx-top: 5;
  $idx-z-index: 6;

  // id width height left top z-index
  $all:
      "tree"            467   581   433   341 ,
      "blocks"          360   150   904   646 ,
      "statue"          287   171   858   816 ,
      "walrus"          22    19    897   1473,
      "penguin-revolt"  174   55    865   1571,
      "snowman-reading" 571   237   -227  1450,
      "rosetta-stone"   117   96    28    944 ,
      "white-board"     121   62    570   1102,
      "schoolyard"      434   160   121   255 ,
      "tictactoe"       0     0     922   375 ,
      "book-club"       90    97    360   558 ,
      "balloon"         183   209   200   804 ,
      "balloon-ropes"   234   40    180   963 ,
      "balloon-flight"  155   209   200   804 ,
      "snowmobile1"     0     0     310   460 ,
      "snowmobile2"     0     0     900   680 ,
      "snowmobile3"     0     0     665   895 ,
      "snowmobile4"     0     0     640   2090,
      "unicycle"        21    57    310   500 ,
      "wrangler"        0     0     700   2250,
  ;

  // TODO: top/top for tablet and desktop are magic numbers

  width: $width-desktop;
  position: absolute;
  top: 0;
  left: 50%;
  margin-left: -($width-desktop / 2);
  height: $height-desktop;

  @media (max-width: $width-desktop - 1px) {
    width: $width-tablet;
    margin-left: -($width-tablet / 2);
    height: $height-tablet;
  }

  .clickable {
    pointer-events: auto;
  }

  > *, div {
    background: center no-repeat;
    background-size: contain;
    position: absolute;
  }

  @for $i from 1 through length($all) {
    $row: nth($all, $i);
    $id: nth($row, $idx-id);

    #easteregg-#{$id} {
      $top: nth($row, $idx-top);
      $height: nth($row, $idx-height) * $svg-ratio;
      z-index: round($top + $height);

      // only load background-image if the w/h is nonzero
      @if nth($row, $idx-width) > 0 {
        background-image: url(img/easteregg-#{nth($row, $idx-id)}.svg);
      }

      // TODO(skarEE): The width/height of each image is expressed in the
      // original SVG size, so it needs to be multiplied by svg-ratio. This is
      // NOT the case for left/top positions.

      width: percent(nth($row, $idx-width) * $svg-ratio, $width-desktop);
      height: percent(nth($row, $idx-height) * $svg-ratio, $height-desktop);
      left: percent(nth($row, $idx-left), $width-desktop);
      top: percent(nth($row, $idx-top), $height-desktop);
    }
  }

  #easteregg-tictactoe, effect-snowmobile {
    @media (max-width: ($width-desktop - 1)) {
      transform: scale(0.6);
    }
  }

  #easteregg-schoolyard {
    $w: 434;
    $h: 160;

    .seesaw {
      position: absolute;
      width: percent(58 * $svg-ratio, $w);
      height: percent(30 * $svg-ratio, $h);
      left: 181px;
      top: 83px;
      @media (max-width: ($width-desktop - 1)) {
        left: 109px;
        top: 50px;
      }

      background-repeat: no-repeat;
      background-image: url(img/seesaw.svg);
      transform-origin: 50% 80%;
      @include will-change(transform);
      animation: #{$name}-seesaw 3s ease infinite;
    }

    .slide {
      position: absolute;
      width: percent(15 * $svg-ratio, $w);
      height: percent(27 * $svg-ratio, $h);
      background-repeat: no-repeat;
      background-image: url(img/slide.svg);
      top: 58px;
      left: 276px;
      @media (max-width: ($width-desktop - 1)) {
        top: 35px;
        left: 165px;
      }
      @include will-change(transform);
      animation: #{$name}-slide 4s ease infinite;
    }

    .swing {
      position: absolute;
      width: percent(27 * $svg-ratio, $w);
      height: percent(29 * $svg-ratio, $h);
      transform-origin: 0 0;
      left: 239px;
      top: 51px;
      @media (max-width: ($width-desktop - 1)) {
        left: 144px;
        top: 32px;
      }
      background-repeat: no-repeat;
      background-image: url(img/swing.svg);
      @include will-change(transform);
      animation: #{$name}-swing 10s ease-in-out infinite;
    }

    a {
      position: absolute;
      width: percent(120 * $svg-ratio, $w);
      height: percent(100 * $svg-ratio, $h);
      left: 55%;
      top: 33%;
    }
  }

  #easteregg-walrus {
    overflow: hidden;
    background: none;

    &::after {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background-image: url(img/easteregg-walrus.svg);
      @include will-change();
      animation: #{$name}-walrus 3s ease infinite;
    }
  }

  #easteregg-balloon, #easteregg-busstop1,
  #easteregg-busstop2, #easteregg-busstop3 {
    cursor: pointer;
  }

  #easteregg-balloon, #easteregg-balloon-flight, #easteregg-balloon-ropes {
    transition: opacity 0.2s ease-out;
    @include will-change(transform);
  }

  #easteregg-balloon {
    opacity: 1;
    &.flying {
      opacity: 0;
    }
  }

  #easteregg-balloon-flight, #easteregg-balloon-ropes {
    pointer-events: none;
    opacity: 0;

    &.flying {
      opacity: 1;
    }
  }

  #easteregg-balloon-flight {
    &.flying {
      animation: fly 30s linear;
    }
  }

  #easteregg-balloon, #easteregg-balloon-ropes {
    @include will-change(opacity);
  }

  #easteregg-balloon-flight {
    @include will-change(transform, opacity);
  }

  #easteregg-unicycle {
    animation: travel 120s infinite;
    @include will-change(transform);
    background: none;

    &:after {
      position: absolute;
      content: '';
      width: 100%;
      height: 100%;
      background: url(img/easteregg-unicycle.svg);
      animation: unicycle 1s ease infinite;
      @include will-change(transform);
    };
  }

  #easteregg-busstop3 {
    $w: 63px;
    $h: 24px;

    background-image: url(img/easteregg-busstop3.svg);

    width: percent($w * $svg-ratio, $width-desktop);
    height: percent($h * $svg-ratio, $height-desktop);

    // Not using pct for busstop because we want it exactly on the road
    left: 340px;
    top: 2265px;

    @media (max-width: ($width-desktop - 1)) {
      left: 205px;
      top: 1353px;
    }

    .elf-stop {
      position: absolute;
      @include will-change(opacity);
    }

    .elf-green, .elf-blue {
      width: percent(14 * $svg-ratio, $w);
      height: percent(62 * $svg-ratio, $h);
    }

    .elf-sit-red {
      width: percent(19.5 * $svg-ratio, $w);
      height: percent(48 * $svg-ratio, $h);
    }

    .elf-stop:nth-child(1) {
      left: percent(5, $w);
      top: percent(-16, $h);
    }

    .elf-stop:nth-child(2) {
      left: percent(25, $w);
      top: percent(-22, $h);
    }

    .elf-stop:nth-child(3) {
      left: percent(45, $w);
      top: percent(-22, $h);
    }

    &.bus-load {
      .elf-stop {
        opacity: 0;
      }

      .bus {
        > div {
          opacity: 1;
        }
      }
    }

    &.bus-unload {
      .elf-stop {
        opacity: 1;
      }

      .bus {
        > div {
          opacity: 0;
        }
      }
    }

    &.to-stop {
      .bus {
        transition: transform 10s ease-out;
        @include will-change(transform);
        transform: translateZ(0) translateX(0vw);
      }
    }

    &.from-stop {
      .bus {
        transition: transform 10s ease-out;
        @include will-change(transform);
        transform: translateZ(0) translateX(-100vw);
      }
    }

    .bus {
      width: percent(330 * $svg-ratio, $w);
      height: percent(108 * $svg-ratio, $h);
      background-image: url(img/bus2.svg);
      top: percent(-50, $h);
      left: percent(-70, $w);
      @include will-change(transform);
      transform: translateZ(0) translateX(100vw);

      div {
        position: absolute;
        opacity: 0;
        transition: opacity .5s ease;
        will-change: opacity;
      }

      .elf-bus {
        width: percent(3.25 * $svg-ratio, $w);
        height: percent(4.5 * $svg-ratio, $h);
        background-image: url(img/elf-bus.svg);
      }

      $elfStart: 24;
      $elfGap: 3.8;
      $elfDelay: 350, 1150, 50, 900, 1500, 2000;
      @for $i from 1 through 6 {
        $idx: $i - 1;

        > div:nth-child(#{$i}) {
          top: percent(11, $h);
          $l: $elfStart + ($idx * $elfGap);
          left: percent($l, $w);
          transition-delay: #{nth($elfDelay, $idx+1)}ms;
        }
      }
    }
  }

  #easteregg-busstop2 {
    $w: 45px;
    $h: 24px;

    background-image: url(img/easteregg-busstop2.svg);

    width: percent($w * $svg-ratio, $width-desktop);
    height: percent($h * $svg-ratio, $height-desktop);

    // Not using pct for busstop because we want it exactly on the road
    left: 780px;
    top: 1234px;

    @media (max-width: ($width-desktop - 1)) {
      left: 440px;
      top: 747px;
    }

    .elf-stop {
      position: absolute;
      will-change: opacity;
    }

    .elf-green, .elf-blue {
      width: percent(14 * $svg-ratio, $w);
      height: percent(62 * $svg-ratio, $h);
    }

    .elf-stop:nth-child(1) {
      left: percent(5, $w);
      top: percent(-25, $h);
    }

    .elf-stop:nth-child(2) {
      left: percent(30, $w);
      top: percent(-22, $h);
    }

    &.bus-load {
      .elf-stop {
        opacity: 0;
      }

      .bus {
        > div {
          opacity: 1;
        }
      }
    }

    &.bus-unload {
      .elf-stop {
        opacity: 1;
      }

      .bus {
        > div {
          opacity: 0;
        }
      }
    }

    &.to-stop {
      .bus {
        transition: transform 10s ease-out;
        will-change: transform;
        transform: translateZ(0) translateX(0vw);
      }
    }

    &.from-stop {
      .bus {
        transition: transform 10s ease-out;
        will-change: transform;
        transform: translateZ(0) translateX(-100vw);
      }
    }

    .bus {
      width: percent(330 * $svg-ratio, $w);
      height: percent(108 * $svg-ratio, $h);
      background-image: url(img/bus2.svg);
      top: percent(-50, $h);
      left: percent(-70, $w);
      transform: translateZ(0) translateX(100vw);
      will-change: transform;

      div {
        position: absolute;
        opacity: 0;
        transition: opacity .5s ease;
        will-change: opacity;
      }

      .elf-bus {
        width: percent(3.25 * $svg-ratio, $w);
        height: percent(4.5 * $svg-ratio, $h);
        background-image: url(img/elf-bus.svg);
      }

      $elfStart: 17;
      $elfGap: 2.6;
      $elfDelay: 350, 1150, 50, 900, 1500, 2000;
      @for $i from 1 through 6 {
        $idx: $i - 1;

        > div:nth-child(#{$i}) {
          top: percent(11, $h);
          $l: $elfStart + ($idx * $elfGap);
          left: percent($l, $w);
          transition-delay: #{nth($elfDelay, $idx+1)}ms;
        }
      }
    }
  }


  #easteregg-busstop1 {
    $w: 85px;
    $h: 73px;

    background-image: url(img/easteregg-busstop1.svg);

    width: percent($w * $svg-ratio, $width-desktop);
    height: percent($h * $svg-ratio, $height-desktop);

    // Not using pct for busstop because we want it exactly on the road
    left: 410px;
    top: 217px;

    @media (max-width: ($width-desktop - 1)) {
      left: 234px;
      top: 132px;
    }

    &.bus-load {
      .elf-stop {
        opacity: 0;
      }

      .bus {
        > div {
          opacity: 1;
        }
      }
    }

    &.bus-unload {
      .elf-stop {
        opacity: 1;
      }

      .bus {
        > div {
          opacity: 0;
        }
      }
    }

    &.to-stop {
      .bus {
        animation-fill-mode: forwards;
        animation: to-bus-stop-1 10s linear;
        transform: translateZ(0) translateX(0vw) translateY(0vw);
      }
    }

    &.from-stop {
      .bus {
        animation-fill-mode: forwards;
        animation: from-bus-stop-1 10s linear;
        transform: translateZ(0) translateX(-100vw) translateY(0vw);
      }
    }

    .elf-stop {
      position: absolute;
      will-change: opacity;
    }

    .elf-stop:nth-child(1) {
      left: percent(50, $w);
      top: percent(19, $h);
    }

    .elf-stop:nth-child(2) {
      left: percent(70, $w);
      top: percent(19, $h);
    }

    .elf-stop:nth-child(3) {
      left: percent(90, $w);
      top: percent(22, $h);
    }

    .elf-stop:nth-child(4) {
      left: percent(105, $w);
      top: percent(22, $h);
    }

    .elf-stop:nth-child(5) {
      left: percent(120, $w);
      top: percent(22, $h);
    }

    .elf-green, .elf-orange, .elf-blue {
      width: percent(14 * $svg-ratio, $w);
      height: percent(62 * $svg-ratio, $h);
    }

    .biz-snowman {
      width: percent(38 * $svg-ratio, $w);
      height: percent(56 * $svg-ratio, $h);
    }

    .bus {
      width: percent(220 * $svg-ratio, $w);
      height: percent(72 * $svg-ratio, $h);
      background-image: url(img/bus.svg);
      top: percent(25, $h);
      transform: translateZ(0) translateX(100vw) translateY(-3vw);
      will-change: transform;

      div {
        position: absolute;
        opacity: 0;
        transition: opacity .5s ease;
        will-change: opacity;
      }

      .elf-bus {
        width: percent(13 * $svg-ratio, $w);
        height: percent(18 * $svg-ratio, $h);
        background-image: url(img/elf-bus.svg);
      }

      .snowman-bus {
        width: percent(13 * $svg-ratio, $w);
        height: percent(14 * $svg-ratio, $h);
        background-image: url(img/snowman-bus.svg);
      }

      > div:nth-child(1) {
        left: percent(24.5, $w);
        top: percent(19, $h);
      }

      $elfStart: 32;
      $elfGap: 7.5;
      $elfDelay: 350, 1150, 50, 900, 1500, 2000;
      @for $i from 2 through 6 {
        $idx: $i - 2;

        > div:nth-child(#{$i}) {
          top: percent(15, $h);
          $l: $elfStart + ($idx * $elfGap);
          left: percent($l, $w);
          transition-delay: #{nth($elfDelay, $idx+1)}ms;
        }
      }

      @media (max-width: ($width-desktop - 1)) {
        > div:nth-child(1) {
          left: percent(25, $w);
          top: percent(19, $h);
        }

        $elfStart: 33;
        $elfGap: 7.5;
        @for $i from 2 through 6 {
          $idx: $i - 2;

          > div:nth-child(#{$i}) {
            top: percent(17, $h);
            $l: $elfStart + ($idx * $elfGap);
            left: percent($l, $w);
          }
        }
      }
    }
  }

  .elf-green {
    background-image: url(img/elf-green.svg);
  }

  .elf-orange {
    background-image: url(img/elf-orange.svg);
  }

  .elf-blue {
    background-image: url(img/elf-blue.svg);
  }

  .elf-sit-red {
    background-image: url(img/elf-sit-red.svg);
  }

  .biz-snowman {
    background-image: url(img/biz-snowman.svg);
  }
}

@keyframes fly {
  0% {
    transform: translateZ(0) translateY(0) translateX(0);
  }

  10% {
    transform: translateZ(0) translateY(-220px) translateX(50px);
  }

  50% {
    transform: translateZ(0) translateY(-220px) translateX(100vw);
  }

  50.1% {
    transform: translateZ(0) translateY(-100vw) translateX(100vw);
  }

  50.2% {
    transform: translateZ(0) translateY(-100vw) translateX(-100vw);
  }

  50.3% {
    transform: translateZ(0) translateY(-220px) translateX(-100vw);
  }

  90% {
    transform: translateZ(0) translateY(-220px) translateX(-280px);
  }

  100% {
    transform: translateZ(0) translateY(0) translateX(0);
  }
}

@keyframes unicycle {
  33% {
    transform: rotateZ(10deg);
  }
  66% {
    transform: rotateZ(-10deg);
  }
}

@keyframes travel {
  0% {
    transform: translateX(0);
  }
  50% {
    transform: translateX(100vw);
  }
  50.00001% {
    transform: translateX(-100vw);
  }
  100% {
    transform: translateX(0);
  }
}

@keyframes to-bus-stop-1 {
  0% {
    transform: translateZ(0) translateX(100vw) translateY(-100%);
  }
  75% {
    transform: translateZ(0) translateX(355px) translateY(-100%);
  }
  77% {
    transform: translateZ(0) translateX(320px) translateY(-50%);
  }
  80% {
    transform: translateZ(0) translateX(300px) translateY(0%);
  }
  100% {
    transform: translateZ(0) translateX(0vw) translateY(0%);
  }
}

@keyframes from-bus-stop-1 {
  0% {
    transform: translateZ(0) translateX(0vw) translateY(0%) rotateZ(0deg);
  }
  100% {
    transform: translateZ(0) translateX(-100vw) translateY(100%) rotateZ(0deg);
  }
}
